@model CursoFiltroVM
@{
    ViewData["Title"] = "UniVest";
}
@section Styles {
    <link rel="stylesheet" href="~/css/filtros.css" />
}

<div class="banner">
    Seu futuro em um só lugar!
</div>

<form asp-controller="Home" asp-action="Cursos" class="filters">
    <select asp-for="CursoId" asp-items="@(new SelectList(Model?.Cursos ?? Enumerable.Empty<Curso>(), "Id", "Nome"))">
        <option value="">Cursos</option>
    </select>

    <select asp-for="UniversidadeId"
        asp-items="@(new SelectList(Model?.Universidades ?? Enumerable.Empty<Universidade>(), "Id", "Nome"))">
        <option value="">Universidade</option>
    </select>

    <select asp-for="CampusId" asp-items="@(new SelectList(Model?.Campi ?? Enumerable.Empty<Campus>(), "Id", "Nome"))">
        <option value="">Campus</option>
    </select>

    <select asp-for="Estado">
        <option value="">Estado</option>
        @foreach (var estado in (Model?.Estados ?? Enumerable.Empty<string>()))
        {
            <option value="@estado">@estado</option>
        }
    </select>

    <select asp-for="Modalidade">
        <option value="">Modalidade</option>
        @foreach (var mod in (Model?.Modalidades ?? Enumerable.Empty<string>()))
        {
            <option value="@mod">@mod</option>
        }
    </select>

    <select asp-for="Periodo">
        <option value="">Período</option>
        @foreach (var p in (Model?.Periodos ?? Enumerable.Empty<string>()))
        {
            <option value="@p">@p</option>
        }
    </select>
    <button id="filtrar" type="submit">Filtrar</button>
    <button type="button" onclick="limpar()">Limpar</button>
</form>

<div class="cards">
    @foreach (var item in (Model?.Resultados ?? Enumerable.Empty<CampusCurso>()))
    {
        <div class="card">
            <div class="card-header">
                <span class="tag">@item.Campus?.Estado</span>
                <span class="tag">@item.Modalidade?.Nome</span>
            </div>
            <h3>@item.Campus?.Universidade?.Nome - @item.Curso?.Nome</h3>
            <p>@item.Campus?.Nome</p>
            <a asp-controller="Home" asp-action="Detalhes" asp-route-id="@item.Id" class="arrow-link">
                ➜
            </a>
        </div>
    }
</div>

@section Scripts {
    <script>
        function limpar() {
            document.getElementById('UniversidadeId').selectedIndex = 0;
            document.getElementById('CursoId').selectedIndex = 0;
            document.getElementById('CampusId').selectedIndex = 0;
            document.getElementById('Estado').selectedIndex = 0;
            document.getElementById('Modalidade').selectedIndex = 0;
            document.getElementById('Periodo').selectedIndex = 0;

            document.getElementById('filtrar').click();
        }
    </script>
}